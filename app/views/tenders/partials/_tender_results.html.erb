<%#= render 'tenders/partials/tender_results' %>

<div class="mt-8">
  <%#= @bid_result %>

  <div class="">
    <div class="text-2xl font-bold my-4">
      Tender Result
    </div>
    <div class="">
      <span class="font-medium text-gray-500">Tender Status: </span>
      <span class="text-gray-900"><%= @bid_result['bid_data']['BidStatus'] %></span>
    </div>
    <div class="">
      <span class="font-medium text-gray-500">Additional Information: </span>
      <span class="text-gray-900"><%= @bid_result['bid_data']['BidAdditionalReq'] %></span>
    </div>
    <div class="font-bold underline-offset-4 underline mt-4 mb-2">
      Buyer Details
    </div>
    <div class="">
      <span class="font-bold">Name: </span>
      <span><%= @bid_result['bid_data']['Name'] %></span>
    </div>
    <div class="">
      <span class="font-bold">Address: </span>
      <span><%= @bid_result['bid_data']['Address'] %></span>
    </div>
    <div class="">
      <span class="font-bold">Ministry: </span>
      <span><%= @bid_result['bid_data']['Ministry'] %></span>
    </div>
    <div class="">
      <span class="font-bold">Department: </span>
      <span><%= @bid_result['bid_data']['Department'] %></span>
    </div>
    <div class="">
      <span class="font-bold">Organisation: </span>
      <span><%= @bid_result['bid_data']['Organisation'] %></span>
    </div>
    <div class="">
      <span class="font-bold">Office Address: </span>
      <span><%= @bid_result['bid_data']['Office'] %></span>
    </div>

    <% if @bid_result['tech_eval'].present? %>
      <div>
        <div class="text-xl font-bold mt-8">
          Technical Evaluation
        </div>
        <div class="mt-4">
          <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
            <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
              <% @bid_result['tech_eval'].each_with_index do |row, idx| %>
                <% if idx === 0 %>
                  <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                  <tr>
                    <% row.each do |td| %>
                      <th scope="col" class="px-6 py-3">
                        <%= td %>
                      </th>
                    <% end %>
                  </tr>
                  </thead>
                  <tbody>
                <% else %>
                  <tr class="odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700">
                    <% row.each do |td| %>
                      <td class="px-6 py-4">
                        <%= td %>
                      </td>
                    <% end %>
                  </tr>
                <% end %>
                </tbody>
              <% end %>
            </table>
          </div>
        </div>
      </div>
    <% end %>

    <!--    Fin eval-->
    <% if @bid_result['fin_eval'].present? %>
      <div>
        <div class="text-xl font-bold mt-8">
          Financial Evaluation
        </div>
        <div class="mt-4">
          <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
            <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
              <% @bid_result['fin_eval'].each_with_index do |row, idx| %>
                <% if idx === 0 %>
                  <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                  <tr>
                    <% row.each do |td| %>
                      <th scope="col" class="px-6 py-3">
                        <%= td %>
                      </th>
                    <% end %>
                  </tr>
                  </thead>
                  <tbody>
                <% else %>
                  <tr class="odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700">
                    <% row.each do |td| %>
                      <td class="px-6 py-4">
                        <%= td %>
                      </td>
                    <% end %>
                  </tr>
                <% end %>
                </tbody>
              <% end %>
            </table>
          </div>
        </div>
      </div>
    <% end %>

    <% if @bid_result['contractFullData'].present? %>
      <!--   contract-->
      <div class="bg-white p-6 rounded-lg shadow-md mb-6">
        <h2 class="text-xl font-semibold text-gray-800 mb-2">Contract Details</h2>

        <dl class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2">
          <!--        <div class="sm:col-span-1">-->
          <!--          <dt class="text-sm font-medium text-gray-500">Contract ID:</dt>-->
          <!--          <dd class="mt-1 text-sm text-gray-900"></dd>-->
          <!--        </div>-->
          <div class="sm:col-span-1">
            <dt class="text-sm font-medium text-gray-500">Contract Status:</dt>
            <dd class="mt-1 text-sm text-gray-900"><%= @bid_result['contractFullData']['contractStatus'] %></dd>
          </div>
          <div class="sm:col-span-1">
            <dt class="text-sm font-medium text-gray-500">Seller:</dt>
            <dd class="mt-1 text-sm text-gray-900"><%= @bid_result['contractFullData']['sellerOrgName'] %></dd>
          </div>
          <div class="sm:col-span-1">
            <dt class="text-sm font-medium text-gray-500">Buyer Designation:</dt>
            <dd class="mt-1 text-sm text-gray-900"><%= @bid_result['contractFullData']['buyerDesignation'] %></dd>
          </div>
          <div class="sm:col-span-1">
            <dt class="text-sm font-medium text-gray-500">Buying Mode:</dt>
            <dd class="mt-1 text-sm text-gray-900"><%= @bid_result['contractFullData']['buyingMode'] %></dd>
          </div>
          <div class="sm:col-span-1">
            <dt class="text-sm font-medium text-gray-500">Contract Date:</dt>
            <dd class="mt-1 text-sm text-gray-900"><%= Time.parse(
                                                         @bid_result['contractFullData']['contractDate']).in_time_zone('Asia/Kolkata') %></dd>
          </div>
          <div class="sm:col-span-1">
            <dt class="text-sm font-medium text-gray-500">Contract Amount:</dt>
            <dd class="mt-1 text-sm text-gray-900"><%= @bid_result['contractFullData']['contractAmount'] %></dd>
          </div>
        </dl>

        <div class="mt-4 overflow-x-auto">
          <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
            <% @bid_result['contractFullData']['contractTable'].each_with_index do |row, idx| %>
              <% if idx === 0 %>
                <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                <tr>
                  <% row.each do |td| %>
                    <th scope="col" class="px-6 py-3">
                      <%= td %>
                    </th>
                  <% end %>
                </tr>
                </thead>
                <tbody>
              <% else %>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                  <% row.each do |td| %>
                    <td class="px-6 py-4">
                      <%= td %>
                    </td>
                  <% end %>
                </tr>
              <% end %>
            <% end %>
            </tbody>
          </table>
        </div>

      </div>
    <% end %>

  </div>
</div>
